<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <style>
    #output {
      white-space: pre-wrap; /* Для корректного отображения переносов строк */
    }
  </style>
</head>
<body>

  <img src="placeholder.jpg" alt="Test Image">


  <div id="output"></div>

  <script>
    Telegram.WebApp.ready();

    const outputDiv = document.getElementById('output');

    function logToMiniApp(message) {
      outputDiv.textContent += message + '\n';
    }

    logToMiniApp("Init Data: " + JSON.stringify(Telegram.WebApp.initData));
    logToMiniApp("API Version: " + Telegram.WebApp.version);
    logToMiniApp("Color Scheme: " + Telegram.WebApp.colorScheme);
    logToMiniApp("Language: " + Telegram.WebApp.language);


    Telegram.WebApp.getUserInfo()
      .then(user => {
        logToMiniApp("User Data: " + JSON.stringify(user));
        if (user && user.photo_url) {
          const img = document.createElement('img');
          img.src = user.photo_url;
          document.body.appendChild(img);
        }
      })
      .catch(error => {
        logToMiniApp("Error getting user info: " + error);
      });


    if (Telegram.WebApp.MainButton.isVisible) {
      logToMiniApp("Main Button is visible");
    }

    Telegram.WebApp.BackButton.onClick(() => {
      logToMiniApp("Back button clicked");
    });

    Telegram.WebApp.onEvent('themeChanged', () => {
      logToMiniApp("Theme changed");
    });
  </script>

</body>
</html>
