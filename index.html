<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <style>
    #output {
      white-space: pre-wrap; /* For proper line breaks */
    }
  </style>
</head>
<body>

  <img src="placeholder.jpg" alt="Test Image">

  <div id="output"></div>

  <script>
    // Wait for DOM content to be fully loaded
    document.addEventListener('DOMContentLoaded', () => {
      const outputDiv = document.getElementById('output');

      // Initialize Telegram Web App
      Telegram.WebApp.ready();

      function logToMiniApp(message) {
        outputDiv.textContent += message + '\n';
      }

      logToMiniApp("Init Data: " + JSON.stringify(Telegram.WebApp.initData));
      logToMiniApp("API Version: " + Telegram.WebApp.version);
      logToMiniApp("Color Scheme: " + Telegram.WebApp.colorScheme);
      logToMiniApp("Language: " + Telegram.WebApp.language);

      // Get user info
      Telegram.WebApp.getUserInfo()
        .then(user => {
          logToMiniApp("User Data: " + JSON.stringify(user));
          if (user) {
            if (user.photo_url) {
              // Display user photo if available
              logToMiniApp("User Photo URL: " + user.photo_url);
            }
            logToMiniApp("User First Name: " + (user.first_name || "Имя не указано"));
          } else {
            logToMiniApp("User Data is null");
          }
        })
        .catch(error => {
          logToMiniApp("Error getting user info: " + error);
        });

      // Check visibility of Main Button
      if (Telegram.WebApp.MainButton.isVisible) {
        logToMiniApp("Main Button is visible");
      }

      // Handle Back Button click
      Telegram.WebApp.BackButton.onClick(() => {
        logToMiniApp("Back button clicked");
      });

      // Handle theme change event
      Telegram.WebApp.onEvent('themeChanged', () => {
        logToMiniApp("Theme changed");
      });
    });
  </script>

</body>
</html>
